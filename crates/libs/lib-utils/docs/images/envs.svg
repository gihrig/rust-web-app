<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .bg { fill: #2f2f2f; }
      .arrow-fill { fill: #AAA; }
      .stroke-primary { stroke: #AAA; stroke-width: 2; fill: none; }
      .stroke-dashed { stroke: #AAA; stroke-width: 1.5; stroke-dasharray: 5,5; fill: none; }
      .line-primary { stroke: #AAA; stroke-width: 2; }
      .text-title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-section { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-box-title { font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-code { font-family: Arial, sans-serif; font-size: 11px; fill: white; text-anchor: middle; }
      .text-error { font-family: Arial, sans-serif; font-size: 11px; fill: #ff6b6b; text-anchor: middle; }
      .rect-layer { fill: #3D3D3D; }
      .rect-sublayer { fill: #4D4D4D; }
      .rect-error { fill: #5D2D2D; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
     refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow-fill" />
    </marker>
  </defs>

  <rect width="800" height="600" class="bg"/>

  <!-- Application Layer -->
  <rect x="30" y="30" width="740" height="60" rx="5" class="stroke-primary rect-layer"/>
  <text x="400" y="65" class="text-title">Application Code</text>

  <!-- Environment Module -->
  <rect x="30" y="120" width="740" height="360" rx="5" class="stroke-primary rect-layer"/>
  <text x="400" y="150" class="text-title">Environment Module (envs)</text>

  <!-- Function Layer -->
  <rect x="50" y="320" width="700" height="80" rx="5" class="stroke-primary rect-sublayer"/>
  <text x="400" y="355" class="text-section">Environment Functions</text>
  <text x="400" y="380" class="text-box-title">get_env()</text>

  <!-- Processing Layer -->
  <rect x="50" y="210" width="700" height="80" rx="5" class="stroke-primary rect-sublayer"/>
  <text x="393" y="235" class="text-section">Processing &amp; Conversion</text>
  <text x="300" y="260" class="text-box-title">get_env_parse&lt;T&gt;()</text>
  <text x="500" y="260" class="text-box-title">get_env_b64u_as_u8s()</text>

  <!-- Error Handling -->
  <rect x="50" y="420" width="320" height="40" rx="5" class="stroke-primary rect-error"/>
  <text x="210" y="445" class="text-error">Error Handling</text>

  <rect x="430" y="420" width="320" height="40" rx="5" class="stroke-primary rect-error"/>
  <text x="590" y="445" class="text-error">Result&lt;T, Error&gt;</text>

  <!-- Flow Arrows -->
  <!-- App to Functions -->
  <line x1="395" y1="90" x2="395" y2="180" class="line-primary" marker-end="url(#arrowhead)"/>
  <text x="390" y="190" class="text-code">get_env("VAR")</text>

  <line x1="200" y1="90" x2="200" y2="180" class="line-primary" marker-end="url(#arrowhead)"/>
  <text x="200" y="190" class="text-code">get_env_parse::&lt;T&gt;("VAR")</text>

  <line x1="570" y1="90" x2="570" y2="180" class="line-primary" marker-end="url(#arrowhead)"/>
  <text x="570" y="190" class="text-code">get_env_b64u_as_u8s("VAR")</text>

  <!-- Functions to Processing -->
  <line x1="400" y1="290" x2="400" y2="320" class="line-primary" marker-end="url(#arrowhead)"/>

  <!-- Processing to System -->
  <line x1="400" y1="400" x2="400" y2="520" class="line-primary" marker-end="url(#arrowhead)"/>

  <!-- Success Response -->
  <line x1="690" y1="365" x2="690" y2="290" class="stroke-dashed" marker-end="url(#arrowhead)"/>
  <text x="690" y="380" class="text-code">Success</text>
  <line x1="690" y1="245" x2="690" y2="90" class="stroke-dashed" marker-end="url(#arrowhead)"/>
  <text x="690" y="260" class="text-code">Ok(T)</text>

  <!-- Error Flow -->
  <line x1="180" y1="390" x2="180" y2="420" class="stroke-dashed" marker-end="url(#arrowhead)"/>
  <text x="180" y="380" class="text-error">MissingEnv</text>
  <line x1="620" y1="270" x2="620" y2="420" class="stroke-dashed" marker-end="url(#arrowhead)"/>
  <text x="620" y="260" class="text-error">WrongFormat</text>

  <!-- System Environment -->
  <rect x="30" y="520" width="740" height="50" rx="5" class="stroke-primary rect-layer"/>
  <text x="400" y="550" class="text-title">System Environment Variables</text>

</svg>

<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="660" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .background { fill: #2f2f2f; }
      .title { text-anchor: middle; font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: white; }
      .box { fill: none; stroke: #AAA; stroke-width: 2px; }
      .box-title { text-anchor: middle; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: white; }
      .section-header { text-anchor: middle; font-family: Arial, sans-serif; font-size: 12px; fill: white; }
      .text-content { text-anchor: middle; font-family: Arial, sans-serif; font-size: 10px; fill: white; }
      .arrow { stroke: #AAA; stroke-width: 2px; }
      .arrow-fill { fill: #AAA; }
      .footer-note-box { fill: none; stroke: #AAA; stroke-width: 1; stroke-dasharray: 5,5 }
      .footer-text { text-anchor: middle; font-family: Arial, sans-serif; font-size: 10px; fill: white; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
     refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow-fill" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="660" class="background"/>

  <!-- Title -->
  <text x="400" y="30" class="title">RPC Params Module Flow</text>

  <!-- External Dependencies Box -->
  <rect x="50" y="200" width="180" height="120" rx="5" class="box"/>
  <text x="140" y="225" class="box-title">External Dependencies</text>
  <text x="140" y="245" class="text-content">modql::filter::ListOptions</text>
  <text x="140" y="260" class="text-content">rpc_router::{IntoParams,</text>
  <text x="140" y="275" class="text-content">IntoDefaultRpcParams}</text>
  <text x="140" y="290" class="text-content">serde::{Deserialize,</text>
  <text x="140" y="305" class="text-content">DeserializeOwned}</text>

  <!-- ParamsForCreate Box -->
  <rect x="300" y="80" width="160" height="100" rx="5" class="box"/>
  <text x="380" y="105" class="box-title">ParamsForCreate&lt;D&gt;</text>
  <text x="380" y="125" class="section-header">Fields:</text>
  <text x="380" y="140" class="text-content">• data: D</text>
  <text x="380" y="160" class="text-content">Impl: IntoParams</text>

  <!-- ParamsForUpdate Box -->
  <rect x="300" y="200" width="160" height="110" rx="5" class="box"/>
  <text x="380" y="225" class="box-title">ParamsForUpdate&lt;D&gt;</text>
  <text x="380" y="245" class="section-header">Fields:</text>
  <text x="380" y="260" class="text-content">• id: i64</text>
  <text x="380" y="275" class="text-content">• data: D</text>
  <text x="380" y="295" class="text-content">Impl: IntoParams</text>

  <!-- ParamsIded Box -->
  <rect x="300" y="330" width="160" height="90" rx="5" class="box"/>
  <text x="380" y="355" class="box-title">ParamsIded</text>
  <text x="380" y="375" class="section-header">Fields:</text>
  <text x="380" y="390" class="text-content">• id: i64</text>
  <text x="380" y="405" class="text-content">Impl: IntoParams</text>

  <!-- ParamsList Box -->
  <rect x="300" y="440" width="160" height="120" rx="5" class="box"/>
  <text x="380" y="465" class="box-title">ParamsList&lt;F&gt;</text>
  <text x="380" y="485" class="section-header">Fields:</text>
  <text x="380" y="500" class="text-content">• filters: Option&lt;Vec&lt;F&gt;&gt;</text>
  <text x="380" y="515" class="text-content">• list_options:</text>
  <text x="380" y="530" class="text-content">  Option&lt;ListOptions&gt;</text>
  <text x="380" y="550" class="text-content">Impl: IntoDefaultRpcParams</text>

  <!-- RPC Operations Box -->
  <rect x="520" y="200" width="200" height="160" rx="5" class="box"/>
  <text x="620" y="225" class="box-title">RPC Operations</text>
  <text x="620" y="250" class="text-content">Create Operations</text>
  <text x="620" y="270" class="text-content">Update Operations</text>
  <text x="620" y="290" class="text-content">Get By ID Operations</text>
  <text x="620" y="310" class="text-content">List Operations</text>
  <text x="620" y="340" class="text-content">Typed &amp; Generic</text>
  <text x="620" y="355" class="text-content">Parameter Validation</text>

  <!-- Arrows from Dependencies -->
  <line x1="230" y1="240" x2="300" y2="130" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="260" x2="300" y2="255" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="280" x2="300" y2="375" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="300" x2="300" y2="480" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Arrows to RPC Operations -->
  <line x1="460" y1="130" x2="520" y2="240" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="460" y1="255" x2="520" y2="260" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="460" y1="375" x2="520" y2="290" class="arrow" marker-end="url(#arrowhead)"/>
  <line x1="460" y1="500" x2="520" y2="320" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Generic Type Flow -->
  <rect x="50" y="450" width="180" height="80" rx="5" class="box"/>
  <text x="140" y="475" class="box-title">Generic Types</text>
  <text x="140" y="495" class="text-content">D: DeserializeOwned + Send</text>
  <text x="140" y="510" class="text-content">F: DeserializeOwned + Send</text>

  <!-- Arrow from Generic Types -->
  <line x1="230" y1="490" x2="300" y2="490" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- Trait Implementation Flow -->
  <rect x="150" y="580" width="500" height="50" rx="5" class="footer-note-box"/>
  <text x="400" y="610" class="footer-text">All params implement appropriate RPC Router traits for type safety</text>
</svg>

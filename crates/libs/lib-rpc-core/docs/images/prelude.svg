<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .bg { fill: #2f2f2f; }
      .arrow-fill { fill: #AAA; }
      .stroke-primary { stroke: #AAA; stroke-width: 2; fill: none; }
      .stroke-dashed { stroke: #AAA; stroke-width: 1; stroke-dasharray: 5,5; fill: none; }
      .line-primary { stroke: #AAA; stroke-width: 2; }
      .text-title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-section { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-box-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-feature-title { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: white; text-anchor: middle; }
      .text-code { font-family: Arial, sans-serif; font-size: 12px; fill: white; text-anchor: middle; }
      .text-small { font-family: Arial, sans-serif; font-size: 10px; fill: white; text-anchor: middle; }
      .text-note { font-family: Arial, sans-serif; font-size: 12px; font-style: italic; fill: white; text-anchor: middle; }
      .text-note-sm { font-family: Arial, sans-serif; font-size: 10px; fill: white; text-anchor: middle; }
      .text-note-box { fill: none; stroke: #AAA; stroke-width: 1; stroke-dasharray: 5,5 }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow-fill"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="600" class="bg"/>
  
  <!-- Title -->
  <text x="400" y="30" class="text-title">lib-rpc-core/src/prelude.rs Flow Diagram</text>
  
  <!-- Main prelude module -->
  <rect x="300" y="60" width="200" height="80" rx="5" class="stroke-primary"/>
  <text x="400" y="85" class="text-box-title">prelude.rs</text>
  <text x="400" y="105" class="text-small">RPC modules prelude</text>
  <text x="400" y="125" class="text-small">Consolidates common imports</text>
  
  <!-- Internal crate imports (left side) -->
  <rect x="50" y="200" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="140" y="225" class="text-code">generate_common_rpc_fns</text>
  
  <rect x="50" y="260" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="140" y="285" class="text-code">DataRpcResult</text>
  
  <rect x="50" y="320" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="140" y="345" class="text-code">Result</text>
  
  <rect x="50" y="380" width="180" height="60" rx="5" class="stroke-primary"/>
  <text x="140" y="405" class="text-small">ParamsForCreate</text>
  <text x="140" y="420" class="text-small">ParamsForUpdate</text>
  <text x="140" y="435" class="text-small">ParamsIded, ParamsList</text>
  
  <!-- External crate imports (right side) -->
  <rect x="570" y="200" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="660" y="225" class="text-code">lib_core::ctx::Ctx</text>
  
  <rect x="570" y="260" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="660" y="285" class="text-code">lib_core::ModelManager</text>
  
  <rect x="570" y="320" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="660" y="345" class="text-code">paste::paste</text>
  
  <rect x="570" y="380" width="180" height="40" rx="5" class="stroke-primary"/>
  <text x="660" y="405" class="text-code">rpc_router</text>
  
  <!-- Usage area -->
  <rect x="250" y="480" width="300" height="80" rx="5" class="stroke-primary"/>
  <text x="400" y="505" class="text-box-title">RPC Modules</text>
  <text x="400" y="525" class="text-small">Import prelude for common types</text>
  <text x="400" y="545" class="text-small">and utilities across RPC handlers</text>
  
  <!-- Arrows from internal imports to prelude -->
  <line x1="230" y1="220" x2="300" y2="100" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="280" x2="300" y2="105" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="340" x2="300" y2="110" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="230" y1="410" x2="300" y2="115" class="line-primary" marker-end="url(#arrowhead)"/>
  
  <!-- Arrows from external imports to prelude -->
  <line x1="570" y1="220" x2="500" y2="100" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="280" x2="500" y2="105" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="340" x2="500" y2="110" class="line-primary" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="400" x2="500" y2="115" class="line-primary" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow from prelude to usage -->
  <line x1="400" y1="140" x2="400" y2="480" class="line-primary" marker-end="url(#arrowhead)"/>
  
  <!-- Labels -->
  <text x="140" y="180" class="text-section">Internal Crate Exports</text>
  <text x="660" y="180" class="text-section">External Dependencies</text>
  
  <!-- Flow indicators -->
  <text x="265" y="160" class="text-small" transform="rotate(-25 265 160)">re-export</text>
  <text x="535" y="160" class="text-small" transform="rotate(25 535 160)">re-export</text>
  <text x="420" y="320" class="text-small" transform="rotate(-90 420 320)">use prelude::*</text>
</svg>
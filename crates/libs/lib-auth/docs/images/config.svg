<svg width="700" height="400" xmlns="http://www.w3.org/2000/svg">
  <rect width="100%" height="100%" fill="#333333"/>
  
  <!-- Singleton Access -->
  <rect x="50" y="50" width="600" height="80" stroke="black" stroke-width="2" fill="#444444" rx="5"/>
  <text x="350" y="85" font-family="Arial" font-size="16" fill="white" text-anchor="middle">auth_config() Function</text>
  <text x="350" y="110" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Thread-safe singleton access via OnceLock</text>
  
  <!-- Config Loading Decision -->
  <polygon points="300,160 400,160 350,210" stroke="black" stroke-width="2" fill="#444444"/>
  <text x="350" y="185" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Loaded?</text>
  
  <!-- Return Existing -->
  <rect x="450" y="220" width="200" height="60" stroke="black" stroke-width="2" fill="#444444" rx="5"/>
  <text x="550" y="255" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Return existing reference</text>
  
  <!-- Load From Environment -->
  <rect x="50" y="220" width="200" height="60" stroke="black" stroke-width="2" fill="#444444" rx="5"/>
  <text x="150" y="255" font-family="Arial" font-size="14" fill="white" text-anchor="middle">Load from environment</text>
  
  <!-- Configuration Structure -->
  <rect x="50" y="320" width="600" height="60" stroke="black" stroke-width="2" fill="#444444" rx="5"/>
  <text x="350" y="345" font-family="Arial" font-size="14" fill="white" text-anchor="middle">AuthConfig { PWD_KEY, TOKEN_KEY, TOKEN_DURATION_SEC }</text>
  <text x="350" y="365" font-family="Arial" font-size="12" fill="white" text-anchor="middle">Used by token and pwd modules</text>
  
  <!-- Arrows -->
  <line x1="350" y1="130" x2="350" y2="160" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <line x1="350" y1="210" x2="350" y2="240" stroke="white" stroke-width="2"/>
  <line x1="350" y1="240" x2="150" y2="240" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="320" y="235" font-family="Arial" font-size="12" fill="white" text-anchor="middle">No</text>
  
  <line x1="400" y1="185" x2="480" y2="185" stroke="white" stroke-width="2"/>
  <line x1="480" y1="185" x2="480" y2="220" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="420" y="175" font-family="Arial" font-size="12" fill="white" text-anchor="middle">Yes</text>
  
  <line x1="150" y1="280" x2="150" y2="320" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="550" y1="280" x2="550" y2="320" stroke="white" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Arrow definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="white"/>
    </marker>
  </defs>
</svg>
